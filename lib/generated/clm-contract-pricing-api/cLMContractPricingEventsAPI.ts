/**
 * Automatically generated by @grafana/openapi-to-k6: 0.4.1
 * Do not edit manually.
 * CLM Contract Pricing Events API
 * API for submitting CLM Contract Pricing events (v2). Request body shape follows CLMContractPricingEvent_v2 Avro schema.
 * Service version: 2.0.0
 */
import { URL } from "https://jslib.k6.io/url/1.0.0/index.js";

import http from "k6/http";
import type { Params, Response } from "k6/http";

/**
 * Event that contains contract pricing information including product details, price strategies, and price windows for B2C contracts.
 */
export interface CLMContractPricingEventV2 {
  /** Unique string that identifies the event (e.g. GUID). */
  eventInstanceId: string;
  /** Name of the event. */
  eventName?: string;
  /** Timestamp when the event took place (ISO 8601 zulu). */
  eventTime: string;
  /** Application that produced this event. */
  eventSource?: string;
  /** Contract ID that this event is about. */
  eventSubject: string;
  /** Reason event was created. */
  eventReason?: string;
  /**
   * Marks if event contains privacy sensitive information.
   * @nullable
   */
  containsPrivacyData?: boolean | null;
  data: CLMContractPricingData;
}

/**
 * Business label.
 */
export type CLMContractPricingDataLabel =
  (typeof CLMContractPricingDataLabel)[keyof typeof CLMContractPricingDataLabel];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMContractPricingDataLabel = {
  eneco: "eneco",
  oxxio: "oxxio",
} as const;

/**
 * 2 digit country code (ISO 3166-1 alpha-2).
 */
export type CLMContractPricingDataJurisdiction =
  (typeof CLMContractPricingDataJurisdiction)[keyof typeof CLMContractPricingDataJurisdiction];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMContractPricingDataJurisdiction = {
  NL: "NL",
} as const;

/**
 * @nullable
 */
export type CLMContractPricingDataCustomer = {
  /** @nullable */
  customerId?: string | null;
} | null;

export type CLMContractPricingDataCurrency =
  (typeof CLMContractPricingDataCurrency)[keyof typeof CLMContractPricingDataCurrency];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMContractPricingDataCurrency = {
  EUR: "EUR",
} as const;

export type CLMContractPricingDataStatus =
  (typeof CLMContractPricingDataStatus)[keyof typeof CLMContractPricingDataStatus];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMContractPricingDataStatus = {
  unknown: "unknown",
  new: "new",
  active: "active",
  terminated: "terminated",
  pending: "pending",
  expired: "expired",
  waiting_activation: "waiting_activation",
} as const;

export interface CLMContractPricingData {
  /** Business label. */
  label: CLMContractPricingDataLabel;
  /** Unique identifier for the contract. */
  contractId: string;
  /** 2 digit country code (ISO 3166-1 alpha-2). */
  jurisdiction: CLMContractPricingDataJurisdiction;
  /** @nullable */
  customer?: CLMContractPricingDataCustomer;
  /** Contract start date (YYYY-MM-DD). */
  startDate: string;
  /**
   * Contract end date (YYYY-MM-DD).
   * @nullable
   */
  endDate?: string | null;
  currency?: CLMContractPricingDataCurrency;
  status?: CLMContractPricingDataStatus;
  products: CLMProduct[];
}

export type CLMProductCommodity =
  (typeof CLMProductCommodity)[keyof typeof CLMProductCommodity];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMProductCommodity = {
  electricity: "electricity",
  gas: "gas",
} as const;

export type CLMProductPriceUnit =
  (typeof CLMProductPriceUnit)[keyof typeof CLMProductPriceUnit];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMProductPriceUnit = {
  kWh: "kWh",
  m3: "m3",
} as const;

export type CLMProductPricesItemPriceStrategiesItemPricingStrategy =
  (typeof CLMProductPricesItemPriceStrategiesItemPricingStrategy)[keyof typeof CLMProductPricesItemPriceStrategiesItemPricingStrategy];

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const CLMProductPricesItemPriceStrategiesItemPricingStrategy = {
  single_rate: "single_rate",
  grid_multi_rate: "grid_multi_rate",
  eneco_multi_rate: "eneco_multi_rate",
  dynamic: "dynamic",
} as const;

export type CLMProductPricesItemPriceStrategiesItemPriceWindowsItemIntervalTimeItem =
  {
    /** Start time HH:mm */
    start?: string;
    /** End time HH:mm */
    end?: string;
  };

export type CLMProductPricesItemPriceStrategiesItemPriceWindowsItem = {
  windowName?: string;
  /** @nullable */
  intervalTime?:
    | CLMProductPricesItemPriceStrategiesItemPriceWindowsItemIntervalTimeItem[]
    | null;
  /** @nullable */
  price?: number | null;
};

export type CLMProductPricesItemPriceStrategiesItem = {
  pricingStrategy?: CLMProductPricesItemPriceStrategiesItemPricingStrategy;
  /** @nullable */
  dayOfWeek?: number[] | null;
  /** @nullable */
  priceWindows?:
    | CLMProductPricesItemPriceStrategiesItemPriceWindowsItem[]
    | null;
};

export type CLMProductPricesItem = {
  startDate?: string;
  endDate?: string;
  priceStrategies?: CLMProductPricesItemPriceStrategiesItem[];
};

export interface CLMProduct {
  productId?: string;
  productName?: string;
  commodity?: CLMProductCommodity;
  connectionPointEAN?: string;
  priceUnit?: CLMProductPriceUnit;
  prices?: CLMProductPricesItem[];
}

/**
 * This is the base client to use for interacting with the API.
 */
export class CLMContractPricingEventsAPIClient {
  private cleanBaseUrl: string;
  private commonRequestParameters: Params;

  constructor(clientOptions: {
    baseUrl: string;
    commonRequestParameters?: Params;
  }) {
    this.cleanBaseUrl = clientOptions.baseUrl.replace(/\/+$/, "");

    this.commonRequestParameters = clientOptions.commonRequestParameters || {};
  }

  /**
   * @summary Submit CLM contract pricing event
   */
  submitClmContractPricingEvent(
    cLMContractPricingEventV2: CLMContractPricingEventV2,
    requestParameters?: Params,
  ): {
    response: Response;
    data: void;
    operationId: string;
  } {
    const k6url = new URL(this.cleanBaseUrl + `/events/clm-contract-pricing`);
    const mergedRequestParameters = this._mergeRequestParameters(
      requestParameters || {},
      this.commonRequestParameters,
    );
    const response = http.request(
      "POST",
      k6url.toString(),
      JSON.stringify(cLMContractPricingEventV2),
      {
        ...mergedRequestParameters,
        headers: {
          ...mergedRequestParameters?.headers,
          "Content-Type": "application/json",
        },
      },
    );
    let data;

    try {
      data = response.json();
    } catch {
      data = response.body;
    }
    return {
      response,
      data,
      operationId: "submitClmContractPricingEvent",
    };
  }

  /**
   * Merges the provided request parameters with default parameters for the client.
   *
   * @param {Params} requestParameters - The parameters provided specifically for the request
   * @param {Params} commonRequestParameters - Common parameters for all requests
   * @returns {Params} - The merged parameters
   */
  private _mergeRequestParameters(
    requestParameters?: Params,
    commonRequestParameters?: Params,
  ): Params {
    return {
      ...commonRequestParameters, // Default to common parameters
      ...requestParameters, // Override with request-specific parameters
      headers: {
        ...(commonRequestParameters?.headers || {}), // Ensure headers are defined
        ...(requestParameters?.headers || {}),
      },
      cookies: {
        ...(commonRequestParameters?.cookies || {}), // Ensure cookies are defined
        ...(requestParameters?.cookies || {}),
      },
      tags: {
        ...(commonRequestParameters?.tags || {}), // Ensure tags are defined
        ...(requestParameters?.tags || {}),
      },
    };
  }
}
